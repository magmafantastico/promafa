<!DOCTYPE html>
<html lang="">
<meta charset="UTF-8">
<title></title>
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
<script src="dist/js/villa.min.js"></script>
<link rel="stylesheet" href="dist/css/villa.min.css"/>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="dist/css/material-colors.css"/>
<link rel="stylesheet" type="text/css" href="dist/css/villa-cross.min.css"/>
<script src="dist/js/html5shiv.js"></script>
<script src="dist/js/html5shiv-printshiv.js"></script>
<script src="dist/js/classList.min.js"></script>
<![endif]-->

<style>

	.Element {
		display: block;
		height: 100vh;
		top: 0;
		left: 0;
		width: 0;
	}

</style>

<body class="grey-900">

<div class="Element red-100" data-time="0800"></div>
<div class="Element red-200" data-time="1200"></div>
<div class="Element red-300" data-time="1600"></div>
<div class="Element red-400" data-time="2000"></div>
<div class="Element red-500" data-time="2400"></div>
<div class="Element red-600" data-time="2800"></div>
<div class="Element red-700" data-time="3200"></div>
<div class="Element red-800" data-time="3600"></div>
<div class="Element red-900" data-time="4000"></div>

<script>

	var elements = document.querySelectorAll('.Element');

	var setStyle = function (el, prop, value) {

		el.style.setProperty(prop, value);

	};

	var setScroll = function (el, direction, position) {

		el.scrollTo(0, position);

	};

	function initAnimation(el, to, time, prop, propName, measure) {

		var currentLeft = 0;
		var difference = to - currentLeft;

		var framePerSecond = 30;
		var numberOfSteps = time / ( 1000 / framePerSecond );

		var frameTime = time / numberOfSteps;
		var progress = difference / numberOfSteps;

		var i = 1;

		function step() {

			setTimeout(function () {

				var val = ( ( progress ) * i );

				if (++i < numberOfSteps - 1)
					step();
				else
					val = to;

				prop(el, propName, val + measure);

			}, frameTime);

		}

		step();

	}

	for (var i = elements.length; i--; )
		initAnimation(elements[i], 100, elements[i].dataset.time, setStyle, 'width', '%');

	console.log(document.body.offsetHeight);

	initAnimation(window, document.body.offsetHeight - window.innerHeight, 4000, setScroll, false, '');

</script>

</body>

</html>